// ==UserScript==
// @name         Stash upload helper
// @namespace    http://tampermonkey.net/
// @version      1.0.0
// @description  This script helps create an upload for empornium based on a scene from your local stash instance.
// @author       bdbenim
// @match        https://www.empornium.sx/upload.php*
// @match        https://www.empornium.is/upload.php*
// @match        http://localhost:9999/scenes/*
// @icon         data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAB2HAAAdhwGP5fFlAAAAB3RJTUUH5wsTFhInN7xSgAAAXW1JREFUeNrt3XecZNdZ5/9PVXXOOXfPTE/u0YwmKIyyLMlytkyyjTEYYywwYMDLsmZ/i4Fld1nYJbPLgm2SMbBg1jhhYVsOkhVtaTSjMHl6pnPOuaur6vfH7ZrpGXdXvLdO3Vvf9+vVL4W6de+pqu46zz3nOc8BERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERGRLOIz3QARg8qB+vWf2vWfug3/9AFFQPH68aVAwfq/lwCL6/++suHfF4DV9X+fBULAxA0/kxv+fc30myAiuUkBgHhZBdC5xc82rnXmJs0AY8AocAW4fMM/e4Gg6UaKiPcoABCv6ACOAsfW/3kUaDLdKBuEgH6sYKAbeA04uf4zYbpxIuJeCgDEjYqAu4DXAbdgdfp1phtlQD9WIHCKa0FBNxA23TARyX4KAMQN/MAR4CHgQeBurs3Ly/XmgOeBJ4BvAd/hWk6CiMhVCgAkWxUBbwbeidXx15pukEstAc9yfUCwbLpRIiIiGxUAbwH+Fis5LqIf23+WgG8Av4SVDCkiImLMncAnsZLaTHeQufZzEvgN4LDpXwIRySxNAYgpRcC7gQ9jZexnXCBQQH5RGQVFZev/LCe/sJSCQuvfff4A/kA+gTxrtWAgrwB/IO/qc0Mha2o9vBYkFLJW6oXWVgiHrKX9a8ElwqE1gsvzrK7ME1xZWP/3BYIrcwRXFlNotaMuA/8CfA54BmsFgoh4lAIAybR24EPAT2IV4HGMz+ejqLSG4vJ6SsrrKamov/rvxeX1FBSVGX0jIpHw1eBgaW6cpfkJlubGWJwbZ2l+nKW5cYIrC6aaNwD8NfBXwCWjb5SIOEIBgGTKbqyh5ncCeXaf3OfzU1rZSEXddipqO6io20ZFbQd5+e5eLLC2usTS/DiL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
// @grant        GM_xmlhttpRequest
// @grant        GM_addStyle
// @grant        GM_getValue
// @grant        GM_setValue
// @grant        GM_registerMenuCommand
// @homepageURL  https://github.com/bdbenim/stash-empornium
// @updateURL    https://github.com/bdbenim/stash-empornium/raw/main/emp_stash_fill.user.js
// @downloadURL  https://github.com/bdbenim/stash-empornium/raw/main/emp_stash_fill.user.js
// @require      https://code.jquery.com/jquery-3.7.1.min.js#sha256=fc9a93dd241f6b045cbff0481cf4e1901becd0e12fb45166a8f17f95823f0b1a
// @require      https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js
// @require      https://github.com/bdbenim/stash-empornium/raw/main/resources/stash_library.user.js#sha256=a3495315fb08ecb26ddc0ef02ace3c81aac1e389fa1096c8a1ef5e4717f5eac3
// ==/UserScript==

// Changelog:
// v1.0.0
//  - BREAKING: Fill requests go to a new endpoint now to start a job and
//    get a job ID before going to the original endpoint to retrieve data.
//  - Add an "Upload to EMP" button to Stash
// v0.5.1
//  - Fix bug where screens checkbox would be disabled instead of gallery
//    checkbox if no gallery is associated with the scene.
// v0.5.0
//  - Add the option to include a scene's gallery
// v0.4.0
//  - You can now have the torrent file be uploaded automatically without
//    having to navigate to it
// v0.3.0
//  - Add ability to toggle anonymous uploading
// v0.2.0
//  - Process suggested tags generated by the backend server
// v0.1.3
//  - Ensure all stash data is read before processing
// v0.1.2
//  - Add Open Stash button
// v0.1.1
//  - Fixed default values in settings menu
// v0.1.0
//  - Display filename in place of title if title is null

const BACKEND_DEFAULT = "http://localhost:9932";
const STASH_DEFAULT = "http://localhost:9999";
const STASH_API_KEY_DEFAULT = null;
const EMPORNIUM_DEFAULT = "https://www.empornium.is";

var BACKEND = GM_getValue("backend_url", BACKEND_DEFAULT);
var STASH = GM_getValue("stash_url", STASH_DEFAULT);
var STASH_API_KEY = GM_getValue("stash_api_key", STASH_API_KEY_DEFAULT);
var EMPORNIUM = GM_getValue("empornium", EMPORNIUM_DEFAULT);

function store(key, prompt_text, default_value) {
    let oldvalue = GM_getValue(key, default_value);
    GM_setValue(key, prompt(prompt_text, oldvalue) || oldvalue);
}

GM_registerMenuCommand("Set backend URL", () => {
    store("backend_url", "backend url? (e.g. http://localhost:9932)", BACKEND_DEFAULT);
});
GM_registerMenuCommand("Set stash URL", () => {
    store("stash_url", "stash URL? (e.g. http://localhost:9999)", STASH_DEFAULT);
});
GM_registerMenuCommand("Set stash API key", () => {
    store("stash_api_key", "stash API key?", STASH_API_KEY_DEFAULT);
});
GM_registerMenuCommand("Set Empornium URL", () => {
    store("empornium", "EMP URL?", EMPORNIUM_DEFAULT);
});

GM_addStyle("#stash_statusarea { font-weight: bold; font-size: 16pt; padding-top: 12pt; text-align: center; }");
GM_addStyle("#stash_statusarea:empty { padding: 0; }");
GM_addStyle("#stash_instructions { font-size: 12pt; padding: 12pt 0; margin-left: auto; margin-right: auto; max-width: 600px; }");
GM_addStyle("#stash_instructions:empty { padding: 0; }");
GM_addStyle("#stash_instructions li + li { padding-top: 12pt; }");
GM_addStyle("#stash_instructions > ol { padding-top: 12pt; }");
GM_addStyle("#stash_instructions input { width: 100%; font-family: monospace; font-size: 10pt; }");

var graphql = {
    method: "POST", headers: {
        "Content-Type": "application/json",
    }, url: new URL("/graphql", STASH).href,
};

if (STASH_API_KEY !== null) {
    graphql.headers.apiKey = STASH_API_KEY;
}

const b64toBlob = (b64Data, contentType = "", sliceSize = 512) => {
    const byteCharacters = atob(b64Data);
    const byteArrays = [];

    for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {
        const slice = byteCharacters.slice(offset, offset + sliceSize);

        const byteNumbers = new Array(slice.length);
        for (let i = 0; i < slice.length; i++) {
            byteNumbers[i] = slice.charCodeAt(i);
        }

        const byteArray = new Uint8Array(byteNumbers);
        byteArrays.push(byteArray);
    }

    return new Blob(byteArrays, {type: contentType});
};

let job_id;

function generate(data, callback) {
    GM_xmlhttpRequest({
        method: "POST",
        headers: {"Content-Type": "application/json"},
        url: new URL("/generate", BACKEND).href,
        responseType: "json",
        data: JSON.stringify(data),
        onload: function (response) {
            callback(response);
        }
    });
}


function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}

/**
 * Implements a basic mutex for
 * @param lock The name of the key to use as the lock
 * @param op A function to call once the lock is acquired
 * @param timeout Max time in milliseconds to wait
 * @returns {Promise<boolean>} false if timeout exceeded, true otherwise
 */
async function mutex(lock, op, timeout = 10000) {
    let value = GM_getValue(lock, null);
    const start = new Date()
    while (value /*&& (new Date() - new Date(value) < 30000)*/) {
        if (new Date() - start > timeout) {
            return false;
        }
        await sleep(100);
        value = GM_getValue(lock, null);
    }
    GM_setValue(lock, new Date().toString());
    op();
    GM_setValue(lock, null);
    return true;
}

function pushJob(id) {
    mutex("jobs_lock", function () {
        let jobs = GM_getValue("job_ids", []);
        jobs.push(id);
        GM_setValue("job_ids", jobs);
    });
}

async function popJob() {
    let job;
    await mutex("jobs_lock", function () {
        let jobs = GM_getValue("job_ids", []);
        job = jobs.pop();
        GM_setValue("job_ids", jobs);
    });
    return job;
}

(function () {
    "use strict";

    if (location.hostname === "www.empornium.is" || location.hostname === "www.empornium.sx") {


        let parent = document.getElementsByClassName("thin")[0];

        let head = document.createElement("div");
        head.classList.add("head");
        head.innerHTML = "Fill from Stash";

        let body = document.createElement("div");
        body.classList.add("box", "pad");

        let fileSelect = document.createElement("select");
        fileSelect.style.marginLeft = "12pt";
        fileSelect.style.width = "auto";

        let titleDisplay = document.createElement("input");
        titleDisplay.setAttribute("type", "text");
        titleDisplay.setAttribute("disabled", true);
        titleDisplay.style.marginLeft = "12pt";
        titleDisplay.setAttribute("size", 60);

        let templateSelect = document.createElement("select");
        templateSelect.style.marginLeft = "12pt";
        GM_xmlhttpRequest({
            method: "GET",
            url: new URL("/templates", BACKEND).href,
            context: {templateSelect: templateSelect},
            responseType: "json",
            onload: function (response) {
                let optionsAsString = "";
                for (let key in response.response) {
                    optionsAsString += "<option value='" + key + "'>" + response.response[key] + "</option>";
                }
                this.context.templateSelect.innerHTML = optionsAsString;
            },
        });

        let fillButton = document.createElement("input");
        fillButton.setAttribute("type", "submit");
        fillButton.setAttribute("value", "fill from");
        fillButton.style.marginLeft = "12pt";

        let stashButton = document.createElement("input");
        stashButton.setAttribute("type", "submit");
        stashButton.setAttribute("value", "Open Stash");
        stashButton.style.marginLeft = "12pt";

        let moreOptions = document.createElement("div");
        moreOptions.style.marginTop = "12pt";
        let screensToggleLabel = document.createElement("label");
        screensToggleLabel.setAttribute("for", "screenstoggle");
        screensToggleLabel.innerText = "Generate screens? (contact sheet is always generated)";
        screensToggleLabel.style.marginRight = "6pt";
        let screensToggle = document.createElement("input");
        screensToggle.setAttribute("type", "checkbox");
        screensToggle.setAttribute("name", "screenstoggle");
        screensToggle.setAttribute("id", "screenstoggle");
        screensToggle.setAttribute("checked", true);
        moreOptions.appendChild(screensToggleLabel);
        moreOptions.appendChild(screensToggle);
        moreOptions.appendChild(templateSelect);

        let galleryToggleLabel = document.createElement("label");
        galleryToggleLabel.setAttribute("for", "gallery_toggle");
        galleryToggleLabel.innerText = "Include gallery?";
        galleryToggleLabel.style.marginRight = "6pt";
        let galleryToggle = document.createElement("input");
        galleryToggle.setAttribute("type", "checkbox");
        galleryToggle.setAttribute("name", "gallerytoggle");
        galleryToggle.setAttribute("id", "gallery_toggle");
        galleryToggle.checked = false;
        moreOptions.appendChild(document.createElement("br"));
        moreOptions.appendChild(galleryToggleLabel);
        moreOptions.appendChild(galleryToggle);

        let statusArea = document.createElement("div");
        statusArea.setAttribute("id", "stash_statusarea");

        let instructions = document.createElement("div");
        instructions.setAttribute("id", "stash_instructions");

        let idInput = document.createElement("input");
        idInput.setAttribute("size", 8);
        idInput.setAttribute("type", "text");
        idInput.setAttribute("id", "stash_id");
        idInput.setAttribute("placeholder", "Stash ID");

        const announceURL = document.evaluate("//input[contains(@value,'/announce')]", document, null, XPathResult.ANY_UNORDERED_NODE_TYPE, null).singleNodeValue.value;
        GM_setValue("announceURL", announceURL);

        const submitForm = document.getElementById("upload_table");
        const submitRow = submitForm.querySelector(".border > tbody > tr:last-child > td");
        let submitBtn = document.createElement("input");
        submitBtn.id = "autoupload";
        submitBtn.type = "button";
        submitBtn.value = "Upload with File";
        submitBtn.disabled = true;
        submitRow.appendChild(submitBtn);

        function fill(context, id) {
            GM_xmlhttpRequest({
                method: "POST",
                headers: {"Content-Type": "application/json"},
                url: new URL("/fill", BACKEND).href,
                responseType: "stream",
                data: JSON.stringify({
                    id: id,
                }),
                context: context,
                onreadystatechange: async function (response) {
                    if (response.readyState === 2 && response.status === 200) {
                        const reader = response.response.getReader();
                        while (true) {
                            const {done, value} = await reader.read(); // value is Uint8Array
                            if (value) {
                                let text = new TextDecoder().decode(value);
                                let j;
                                try {
                                    j = JSON.parse(text);
                                } catch (e) {
                                    if (text.includes('"message": "Done"')) {
                                        console.debug("The response stream was incomplete, reading until end of stream.");
                                        const stashData = [];
                                        stashData.push(text);
                                        while (true) {
                                            let {done, value} = await reader.read();
                                            stashData.push(new TextDecoder().decode(value));
                                            if (done) break;
                                        }
                                        text = stashData.join("");
                                        j = JSON.parse(text);
                                    } else {
                                        console.warn("Unexpected failure to read stream data.");
                                    }
                                }
                                if (j) {
                                    if (j.status === "success") {
                                        if ("message" in j.data) {
                                            this.context.statusArea.innerText = j.data.message;
                                        }
                                        if ("fill" in j.data) {
                                            this.context.description.value = j.data.fill.description;
                                            this.context.tags.value = j.data.fill.tags;
                                            this.context.cover.value = j.data.fill.cover;
                                            this.context.title.value = j.data.fill.title;
                                            let instructions = "";
                                            instructions += "Instructions:<ol>";
                                            instructions += "<li>Set a category for the upload and double-check everything for correctness</li>";
                                            instructions += '<li>Make sure the generated torrent is in your torrent client, and attach it to the upload form manually as usual:<div><input type="text" value="' + j.data.fill.torrent_path + '" disabled></div></li>';
                                            instructions += '<li>Make sure the media file is in the torrents path of your torrent client:<div><input type="text" value="' + j.data.fill.file_path + '" disabled></div></li>';
                                            instructions += "</ol>";
                                            this.context.instructions.innerHTML = instructions;

                                            if ("anon" in j.data.fill) {
                                                let radios = [];
                                                for (const el of document.getElementsByTagName("input")) {
                                                    if (el.type === "radio") {
                                                        radios.push(el);
                                                    }
                                                }
                                                if (radios.length === 2) {
                                                    if (j.data.fill.anon) {
                                                        radios[1].checked = true;
                                                    } else {
                                                        radios[0].checked = true;
                                                    }
                                                }
                                            }

                                            if ("file" in j.data) {
                                                // Temporary for debugging. Replace the button each time
                                                // so that we don't add multiple copies of the listener
                                                // function to the same button.
                                                let newBtn = submitBtn.cloneNode();
                                                newBtn.disabled = false;
                                                submitBtn.parentNode.replaceChild(newBtn, submitBtn);
                                                newBtn.addEventListener("click", () => {
                                                    newBtn.disabled = true;
                                                    let formel = document.getElementById("upload_table");
                                                    let formdata = new FormData(formel);
                                                    formdata.set("file_input", b64toBlob(j.data.file.content, "application/x-bittorrent"), j.data.file.name);
                                                    console.debug(formdata);
                                                    const r = new XMLHttpRequest();
                                                    r.onreadystatechange = function () {
                                                        if (r.readyState === XMLHttpRequest.DONE) {
                                                            document.open();
                                                            document.write(r.responseText);
                                                            document.close();
                                                        }
                                                    };
                                                    r.open("POST", new URL("/upload.php", window.location).href);
                                                    r.responseType = "text";
                                                    r.send(formdata);

                                                    GM_xmlhttpRequest({
                                                        method: "POST",
                                                        headers: {"Content-Type": "application/json"},
                                                        url: new URL("/submit", BACKEND).href,
                                                        responseType: "json",
                                                        data: JSON.stringify({
                                                            torrent_path: j.data.fill.torrent_path,
                                                        }),
                                                    });
                                                });
                                            }

                                            if ("suggestions" in j.data) {
                                                let parent = document.getElementsByClassName("thin")[0];

                                                let head = document.createElement("div");
                                                head.classList.add("head");
                                                head.id = "suggestions-head";
                                                head.innerHTML = "Tag Suggestions";

                                                let body = document.createElement("div");
                                                body.classList.add("box", "pad");
                                                body.id = "suggestions-body";

                                                let table = document.createElement("table");
                                                table.id = "tagsuggestions";
                                                table.style.width = "1%";
                                                table.style.marginLeft = "12pt";
                                                let header = document.createElement("tr");
                                                let stashTagHeader = document.createElement("th");
                                                stashTagHeader.setAttribute("scope", "col");
                                                stashTagHeader.style.marginLeft = "12pt";
                                                stashTagHeader.style.marginRight = "auto";
                                                stashTagHeader.innerText = "Stash Tag";

                                                let empTagHeader = document.createElement("th");
                                                empTagHeader.setAttribute("scope", "col");
                                                empTagHeader.style.marginLeft = "12pt";
                                                empTagHeader.style.marginRight = "auto";
                                                empTagHeader.innerText = "EMP Tag";

                                                let ignoreTagHeader = document.createElement("th");
                                                ignoreTagHeader.setAttribute("scope", "col");
                                                ignoreTagHeader.style.marginLeft = "12pt";
                                                ignoreTagHeader.style.marginRight = "auto";
                                                ignoreTagHeader.innerText = "Ignore? ";

                                                let ignoreAll = document.createElement("input");
                                                ignoreAll.type = "checkbox";
                                                ignoreAll.addEventListener("change", function () {
                                                    for (let checkbox of document.getElementsByClassName("tag-ignore")) {
                                                        checkbox.checked = this.checked;
                                                    }
                                                });
                                                ignoreTagHeader.appendChild(ignoreAll);

                                                header.appendChild(stashTagHeader);
                                                header.appendChild(empTagHeader);
                                                header.appendChild(ignoreTagHeader);

                                                table.appendChild(header);

                                                for (var key in j.data.suggestions) {
                                                    if (j.data.suggestions.hasOwnProperty(key)) {
                                                        let row = document.createElement("tr");

                                                        let stashTagBox = document.createElement("td");
                                                        stashTagBox.style.marginRight = "auto";
                                                        stashTagBox.style.whiteSpace = "nowrap";
                                                        let empTagBox = document.createElement("td");
                                                        empTagBox.style.marginLeft = "12pt";
                                                        empTagBox.style.marginRight = "auto";
                                                        empTagBox.style.whiteSpace = "nowrap";
                                                        let ignoreTagBox = document.createElement("td");
                                                        ignoreTagBox.style.marginLeft = "12pt";
                                                        ignoreTagBox.style.marginRight = "auto";
                                                        ignoreTagBox.style.whiteSpace = "nowrap";
                                                        ignoreTagBox.style.textAlign = "center";
                                                        let acceptTagBox = document.createElement("td");
                                                        acceptTagBox.style.marginLeft = "12pt";
                                                        acceptTagBox.style.marginRight = "auto";
                                                        acceptTagBox.style.whiteSpace = "nowrap";

                                                        let tagDisplay = document.createElement("input");
                                                        tagDisplay.setAttribute("type", "text");
                                                        tagDisplay.setAttribute("disabled", true);
                                                        tagDisplay.setAttribute("size", 30);
                                                        tagDisplay.value = key;

                                                        stashTagBox.appendChild(tagDisplay);
                                                        row.appendChild(stashTagBox);

                                                        let tagInput = document.createElement("input");
                                                        tagInput.setAttribute("size", 30);
                                                        tagInput.setAttribute("type", "text");
                                                        tagInput.autocomplete = "on";
                                                        tagInput.value = j.data.suggestions[key];
                                                        unsafeWindow.AutoComplete.addInput(tagInput, "/tags.php");

                                                        empTagBox.appendChild(tagInput);
                                                        row.appendChild(empTagBox);

                                                        let ignoreInput = document.createElement("input");
                                                        ignoreInput.setAttribute("type", "checkbox");
                                                        ignoreInput.classList.add("tag-ignore");

                                                        ignoreTagBox.appendChild(ignoreInput);
                                                        row.appendChild(ignoreTagBox);

                                                        let acceptTagButton = document.createElement("input");
                                                        acceptTagButton.type = "submit";
                                                        acceptTagButton.value = "Accept/Ignore Suggestion";
                                                        acceptTagButton.addEventListener("click", function () {
                                                            let acceptTags = [];
                                                            let ignoreTags = [];
                                                            if (ignoreInput.checked) {
                                                                ignoreTags.push(tagDisplay.value);
                                                            } else {
                                                                acceptTags.push({
                                                                    name: tagDisplay.value, emp: tagInput.value,
                                                                });
                                                                document.getElementById("taginput").value += " " + tagInput.value;
                                                            }
                                                            GM_xmlhttpRequest({
                                                                method: "POST",
                                                                headers: {"Content-Type": "application/json"},
                                                                url: new URL("/suggestions", BACKEND).href,
                                                                responseType: "json",
                                                                data: JSON.stringify({
                                                                    accept: acceptTags, ignore: ignoreTags,
                                                                }),
                                                                context: {
                                                                    statusArea: statusArea,
                                                                },
                                                                onload: function (response) {
                                                                    try {
                                                                        let j = JSON.parse(response.responseText);
                                                                        if (j.status === "success") {
                                                                            if ("message" in j.data) {
                                                                                this.context.statusArea.innerText = j.data.message;
                                                                            }
                                                                        } else if (j.status === "error") {
                                                                            this.context.statusArea.innerHTML = "<span style='color: red;'>" + j.message + "</span>";
                                                                        }
                                                                    } catch (e) {
                                                                        console.warn("Unexpected failure to parse text: " + response.responseText);
                                                                    }
                                                                },
                                                            });
                                                            row.remove();
                                                        });

                                                        acceptTagBox.appendChild(acceptTagButton);
                                                        row.appendChild(acceptTagBox);

                                                        table.appendChild(row);
                                                    }
                                                }

                                                let tagSubmitButton = document.createElement("input");
                                                tagSubmitButton.setAttribute("type", "submit");
                                                tagSubmitButton.value = "Accept/Ignore All Suggestions";
                                                tagSubmitButton.style.marginLeft = "12pt";

                                                body.appendChild(table);
                                                body.appendChild(tagSubmitButton);

                                                tagSubmitButton.addEventListener("click", () => {
                                                    console.log("Accepting tag suggestions");
                                                    let acceptTags = [];
                                                    let ignoreTags = [];
                                                    for (const row of Array.from(table.rows).slice(1)) {
                                                        let stashTag = row.cells[0].childNodes[0].value;
                                                        let empTag = row.cells[1].childNodes[0].value;
                                                        let ignore = row.cells[2].childNodes[0].checked;
                                                        if (ignore) {
                                                            ignoreTags.push(stashTag);
                                                        } else {
                                                            acceptTags.push({name: stashTag, emp: empTag});
                                                            document.getElementById("taginput").value += " " + empTag;
                                                        }
                                                    }
                                                    head.remove();
                                                    body.remove();
                                                    GM_xmlhttpRequest({
                                                        method: "POST",
                                                        headers: {"Content-Type": "application/json"},
                                                        url: new URL("/suggestions", BACKEND).href,
                                                        responseType: "json",
                                                        data: JSON.stringify({
                                                            accept: acceptTags, ignore: ignoreTags,
                                                        }),
                                                        context: {
                                                            statusArea: statusArea,
                                                        },
                                                        onload: function (response) {
                                                            try {
                                                                let j = JSON.parse(response.responseText);
                                                                if (j.status === "success") {
                                                                    if ("message" in j.data) {
                                                                        this.context.statusArea.innerText = j.data.message;
                                                                    }
                                                                } else if (j.status === "error") {
                                                                    this.context.statusArea.innerHTML = "<span style='color: red;'>" + j.message + "</span>";
                                                                }
                                                            } catch (e) {
                                                                console.warn("Unexpected failure to parse text: " + response.responseText);
                                                            }
                                                        },
                                                    });
                                                });

                                                let tagCloseButton = document.createElement("input");
                                                tagCloseButton.setAttribute("type", "submit");
                                                tagCloseButton.value = "Close Suggestions";
                                                tagCloseButton.style.marginLeft = "12pt";
                                                tagCloseButton.addEventListener("click", function () {
                                                    head.remove();
                                                    body.remove();
                                                });

                                                body.appendChild(tagCloseButton);

                                                parent.insertBefore(body, parent.children[7]);
                                                parent.insertBefore(head, body);
                                            }
                                        }
                                    } else if (j.status === "error") {
                                        this.context.statusArea.innerHTML = "<span style='color: red;'>" + j.message + "</span>";
                                        break;
                                    }
                                } else {
                                    console.warn("The response was not read or not converted to JSON.");
                                    console.debug(text);
                                }
                            }
                            if (done) break;
                        }
                    }
                }
            })
        }

        fillButton.addEventListener("click", () => {
            let suggestionsHead = document.getElementById("suggestions-head");
            let suggestionsBody = document.getElementById("suggestions-body");
            if (suggestionsHead) suggestionsHead.remove();
            if (suggestionsBody) suggestionsBody.remove();

            statusArea.innerHTML = "";
            instructions.innerHTML = "";
            generate({
                scene_id: idInput.value,
                file_id: fileSelect.value,
                announce_url: announceURL,
                template: templateSelect.value,
                screens: screensToggle.checked,
                gallery: galleryToggle.checked,
            }, function (response) {
                if (response.status !== 200) {
                    statusArea.innerHTML = "<span style='color: red;'>Error submitting job. Is the backend updated?</span>";
                    return;
                }
                if ("id" in response.response) {
                    job_id = response.response.id;
                    fill({
                        statusArea: statusArea,
                        description: document.getElementById("desc"),
                        tags: document.getElementById("taginput"),
                        cover: document.getElementById("image"),
                        title: document.getElementById("title"),
                        instructions: instructions,
                    }, job_id);
                } else {
                    console.error("No job ID returned from stash-empornium");
                }
            });

        });

        stashButton.addEventListener("click", function () {
            let idInput = document.getElementById("stash_id");
            if (idInput.value.length > 0) {
                window.open(STASH + "/scenes/" + idInput.value, "_blank");
            } else {
                window.open(STASH, "_blank");
            }
        });

        idInput.addEventListener("input", function (event) {
            GM_xmlhttpRequest(Object.assign({}, graphql, {
                data: JSON.stringify({
                    query: '{ findScene(id: "' + idInput.value + '") { id title performers { id name image_path } files { id basename path format width height video_codec audio_codec duration bit_rate frame_rate } galleries { id } } }',
                }), context: {
                    fileSelect: fileSelect, titleDisplay: titleDisplay, galleryToggle: galleryToggle,
                }, onload: function (response) {
                    try {
                        let scene = JSON.parse(response.responseText).data.findScene;
                        let optionsAsString = "";
                        if (scene.title.length > 0) {
                            this.context.titleDisplay.value = scene.title;
                        } else {
                            this.context.titleDisplay.value = scene.files[0].basename;
                        }
                        for (let i = 0; i < scene.files.length; i++) {
                            let file = scene.files[i];
                            let duration = new Date(file.duration * 1000)
                                .toISOString()
                                .slice(11, 19)
                                .replace(/^00:/, "");
                            optionsAsString += "<option value='" + file.id + "'>" + file.width + "×" + file.height + ", " + file.format + ", " + file.video_codec + "/" + file.audio_codec + ", " + duration + "</option>";
                        }
                        this.context.fileSelect.innerHTML = optionsAsString;
                        if (scene.galleries.length == 0) {
                            this.context.galleryToggle.checked = false;
                            this.context.galleryToggle.disabled = true;
                        } else {
                            this.context.galleryToggle.disabled = false;
                        }
                    } catch (err) {
                        this.context.titleDisplay.value = "";
                        this.context.fileSelect.innerHTML = "";
                    }
                },
            }));
            if (event.target.value === "") {
                titleDisplay.value = "";
                fileSelect.innerHTML = "";
            }
            statusArea.innerHTML = "";
            instructions.innerHTML = "";
        });

        body.appendChild(idInput);
        body.appendChild(titleDisplay);
        body.appendChild(fileSelect);
        body.appendChild(fillButton);
        body.appendChild(stashButton);
        body.appendChild(moreOptions);
        body.appendChild(statusArea);
        body.appendChild(instructions);

        parent.insertBefore(body, parent.children[5]);
        parent.insertBefore(head, body);

        popJob().then(function (j) {
            if (j) {
                statusArea.innerHTML = "";
                instructions.innerHTML = "";
                fill({
                    statusArea: statusArea,
                    description: document.getElementById("desc"),
                    tags: document.getElementById("taginput"),
                    cover: document.getElementById("image"),
                    title: document.getElementById("title"),
                    instructions: instructions,
                }, j);
            }
        });
    } else {
        const {
            stash,
            Stash,
            waitForElementId,
            waitForElementClass,
            waitForElementByXpath,
            getElementByXpath,
            getElementsByXpath,
            getClosestAncestor,
            insertAfter,
            createElementFromHTML,
            setNativeValue,
            updateTextInput,
            sortElementChildren,
            xPathResultToArray,
            reloadImg,
            Logger,
        } = unsafeWindow.stash;

        async function empUpload() {
            // Store
            const announceURL = GM_getValue("announceURL", null);
            if (announceURL == null) {
                alert("Getting announce URL from upload.php. Please go back after the page loads and then try again");
                window.location = new URL("/upload.php", EMPORNIUM).href;
            } else {
                let scene_id = window.location.href.split("/scenes/")[1].split('?')[0];
                const data = await stash.callGQL({"query": "{findScene(id:" + scene_id + "){title files{id}}}"})
                generate({
                    scene_id: scene_id, file_id: data.data.findScene.files[0].id, announce_url: announceURL, // template: "",
                    screens: true, gallery: false, // TODO actually get these values from the user
                }, function (r) {
                    pushJob(r.response.id);
                    window.location = new URL("/upload.php", EMPORNIUM).href;
                });
            }
        }

        stash.addEventListener("page:scene", function () {
            // create_button(getTags);
            waitForElementClass("ml-auto btn-group", function (className, element) {
                // create_button(empUpload, element[0])
                const grp = element[0];
                const btn = document.createElement("button");
                btn.setAttribute("id", "emp-upload");
                btn.setAttribute("title", "Upload to Empornium");
                btn.classList.add("btn", "btn-secondary", "minimal");
                btn.innerHTML = '<?xml version="1.0" encoding="UTF-8"?> <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20px" height="20px" viewBox="0 0 20 20" version="1.1"> <g id="surface1"> <path style=" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;" d="M 16.605469 10.332031 L 9.222656 10.332031 L 10.277344 14.378906 C 10.5 15.226562 10.703125 15.773438 10.886719 16.015625 C 11.074219 16.261719 11.339844 16.382812 11.6875 16.382812 C 12.121094 16.382812 12.371094 16.21875 12.429688 15.894531 C 12.492188 15.570312 12.402344 14.945312 12.160156 14.011719 L 11.515625 11.542969 L 16.921875 11.542969 L 17.28125 12.925781 C 17.585938 14.082031 17.742188 14.972656 17.757812 15.59375 C 17.773438 16.214844 17.605469 16.875 17.253906 17.582031 C 16.898438 18.289062 16.359375 18.816406 15.625 19.167969 C 14.894531 19.519531 13.90625 19.699219 12.664062 19.699219 C 11.460938 19.699219 10.351562 19.523438 9.339844 19.175781 C 8.328125 18.828125 7.484375 18.351562 6.8125 17.742188 C 6.144531 17.136719 5.613281 16.46875 5.226562 15.742188 C 4.839844 15.011719 4.464844 13.953125 4.101562 12.558594 L 2.679688 7.101562 C 2.253906 5.464844 2.136719 4.175781 2.335938 3.230469 C 2.53125 2.285156 3.066406 1.558594 3.941406 1.058594 C 4.820312 0.554688 5.910156 0.300781 7.21875 0.300781 C 8.820312 0.300781 10.21875 0.605469 11.414062 1.210938 C 12.613281 1.820312 13.550781 2.621094 14.230469 3.625 C 14.910156 4.625 15.488281 6.035156 15.960938 7.847656 Z M 10.097656 7.285156 L 9.738281 5.917969 C 9.488281 4.949219 9.273438 4.324219 9.097656 4.039062 C 8.917969 3.757812 8.671875 3.617188 8.351562 3.617188 C 7.953125 3.617188 7.742188 3.738281 7.710938 3.976562 C 7.679688 4.214844 7.800781 4.863281 8.074219 5.917969 L 8.429688 7.285156 Z M 10.097656 7.285156 "/> </g> </svg>';
                btn.onclick = empUpload;
                grp.insertBefore(btn, document.getElementById("operation-menu").parentElement.parentElement)
                // grp.appendChild(btn);
            });
        });
    }
})();
